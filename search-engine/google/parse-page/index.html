<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Accurate guide about how to parse a google page with SERPS - the Search Engine Spider.">
        
        <link rel="canonical" href="https://serp-spider.github.io/documentation/search-engine/google/parse-page/">
        <link rel="shortcut icon" href="../../../../../../favicon.ico">
        

	    <title>Parse a Google Page - Documentation - The SERP Spider</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">        <link href="../../../css/base.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-75620778-1', 'serp-spider.github.io');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="/"><img alt='SERPS logo' src="../../../images/logo.png">SERPS</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../..">Home</a>
</li>

                        
                            
<li >
    <a href="../../../overview/">Overview</a>
</li>

                        
                            
<li >
    <a href="../../../browser/">Browser</a>
</li>

                        
                            
<li >
    <a href="../../../cookies/">Cookies</a>
</li>

                        
                            
<li >
    <a href="../../../proxy/">Proxies</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Search Engines <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../">Google</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Http Clients <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../http-client/curl/">CURL</a>
</li>

                        
                            
<li >
    <a href="../../../http-client/phantomJS/">PhantomJS</a>
</li>

                        
                            
<li >
    <a href="../../../http-client/spidyJS/">SpidyJS</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../about/packages/">Packages</a>
</li>

                        
                            
<li >
    <a href="../../../about/versions/">Versions</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li>
                        <a href="https://github.com/serp-spider">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">

    <div class="alpha-banner">
        <i class="fa fa-exclamation-circle"></i>
        We just released <a href="../../../about/migration/from-v0_1-to-v0_2/">version 0.2</a>
        <i class="fa fa-exclamation-circle"></i>
    </div>

    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#parse-a-google-page">Parse a Google Page</a></li>
        
            <li class="level-2"><a href="#natural-results">Natural Results</a></li>
            
                <li class="level-3"><a href="#natural-result-types">Natural Result Types</a></li>
                    
                        <li class="level-4"><a href="#classical">Classical</a></li>
                    
                        <li class="level-4"><a href="#classical-large">Classical Large</a></li>
                    
                        <li class="level-4"><a href="#classical-video">Classical Video</a></li>
                    
                        <li class="level-4"><a href="#classical-illustrated">Classical Illustrated</a></li>
                    
                        <li class="level-4"><a href="#image-group">Image Group</a></li>
                    
                        <li class="level-4"><a href="#video-group">Video Group</a></li>
                    
                        <li class="level-4"><a href="#map">Map</a></li>
                    
                        <li class="level-4"><a href="#answer-box">Answer Box</a></li>
                    
                        <li class="level-4"><a href="#knowledge">Knowledge</a></li>
                    
                        <li class="level-4"><a href="#tweet-carousel">Tweet Carousel</a></li>
                    
                        <li class="level-4"><a href="#in-the-news">In the News</a></li>
                    
                        <li class="level-4"><a href="#top-stories">Top Stories</a></li>
                    
                        <li class="level-4"><a href="#flights">Flights</a></li>
                    
            
        
            <li class="level-2"><a href="#adwords-results">Adwords Results</a></li>
            
                <li class="level-3"><a href="#adwords-sections">Adwords sections</a></li>
                    
            
                <li class="level-3"><a href="#adwords-types">Adwords Types</a></li>
                    
                        <li class="level-4"><a href="#ad">Ad</a></li>
                    
                        <li class="level-4"><a href="#shopping">Shopping</a></li>
                    
            
        
            <li class="level-2"><a href="#additional-info">Additional info</a></li>
            
                <li class="level-3"><a href="#number-of-results">Number of results</a></li>
                    
            
                <li class="level-3"><a href="#related-searches">Related searches</a></li>
                    
            
        
            <li class="level-2"><a href="#custom-parsing">Custom parsing</a></li>
            
                <li class="level-3"><a href="#query-with-css">Query with css</a></li>
                    
            
                <li class="level-3"><a href="#query-with-xpath">Query with xpath</a></li>
                    
            
                <li class="level-3"><a href="#manipulate-the-dom-object">Manipulate the DOM object</a></li>
                    
            
        
    
    </ul>
</div></div>
                <div class="col-md-9" id="main-content" role="main">

<h1 id="parse-a-google-page">Parse a Google Page</h1>
<p><img class="frameless-image" alt="Google logo" src="../../../images/logo-google.png"/></p>
<p><center>The necessary documentation about parsing a google page</center></p>
<hr />
<p>Back to the <a href="../"><strong>general google documentation</strong></a>.</p>
<hr />
<p>Parsing a page consists in the structured extraction of parts of the page. The end result is the ability to 
make the distinction between these different parts and to gather details on them to show them in another fashion.</p>
<div class="admonition warning">
<p class="admonition-title">Important notice about google update</p>
<p>The following examples can change at any time. </p>
<p>As soon as google changes its page structure, you may need to update the library.
You can <a href="https://github.com/serp-spider/search-engine-google/subscription">watch the repository on github</a>
to be warned of new releases as they come.</p>
</div>
<p><img alt="Classical Results" src="../images/serp.png" /></p>
<p>A google SERP can contain different type of result.
Firstly they are divided in three distinct regions: <strong>natural</strong> (organic), <strong>paid</strong> (adwords) and <strong>graph results</strong> and each of them
has its own results types. Graph result are <strong>not supported</strong> by the library.</p>
<p>There is a great diversity of results and the library gives you the api to work with them, here we document
how you will work with. </p>
<h2 id="natural-results">Natural Results</h2>
<p>Natural results (aka organic results) are main results of the page.</p>
<p>Each natural result has a position and some available data. You can access them the following way (see the foreach loop):</p>
<pre><code class="php">    use Serps\SearchEngine\Google\GoogleClient;
    use Serps\SearchEngine\Google\GoogleUrl;

    $googleClient = new GoogleClient($httpClient);

    $googleUrl = new GoogleUrl();
    $google-&gt;setSearchTerm('simpsons');

    $response = $googleClient-&gt;query($googleUrl);

    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        // Here we iterate over the result list
        // Each result will have different data based on its type
    }
</code></pre>

<p>Each of the result from the loop will have the following methods available:</p>
<ul>
<li><code>getTypes()</code>: the types of the result</li>
<li><code>is($type)</code>: check if the result is of the given type</li>
<li><code>getDataValue($type)</code>: Get the given data from the result. Everything accessible with <code>getDataValue</code>
is also accessible with a property, e.g the two examples do the same thing: <code>$result-&gt;getDataValue('url')</code> and <code>$result-&gt;url</code></li>
<li><code>getData()</code>: Get the all the data of the result</li>
<li><code>getOnPagePosition()</code>: Get the position of the result on the page (starting at 1)</li>
<li><code>getRealPosition()</code>: Get the global position of the result (starting at 1), that means it is aware of the pagination. <strong>Be aware</strong> that in some circumstances this number can be wrong because google might show more results on the previous pages.</li>
</ul>
<p>The difference between each result type is the list of data available with <code>getDataValue($type)</code> and <code>getData()</code>.
See bellow for all available data per result type.</p>
<h3 id="natural-result-types">Natural Result Types</h3>
<p><strong>Result types</strong> can be accessed through the class <code>NaturalResultType</code>,</p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;

    if($result-&gt;is(NaturalResultType::CLASSICAL)){
        // Do stuff
    }

    // You can also check many types at once
    // Here we check if the result is classical or image group

    if($result-&gt;is(NaturalResultType::CLASSICAL, NaturalResultType::IMAGE_GROUP)){
        // Do stuff
    }
</code></pre>

<p>From the <strong>resultSet</strong> you can also access all the results matching one of the given type:</p>
<pre><code class="php">    // Get all the results that are either classical or image_group
    $results = $results-&gt;getResultsByType(NaturalResultType::CLASSICAL, NaturalResultType::IMAGE_GROUP);
</code></pre>

<h4 id="classical">Classical</h4>
<p>These results are the common natural results that have always existed in google.</p>
<p><img alt="Classical Results" src="../images/result-types/classical.png" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>NaturalResultType::CLASSICAL</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>title</code> <small><strong>string</strong></small> [<strong>A</strong>]</li>
<li><code>url</code> <small><strong>string</strong></small>: the url targeted on clicking the title</li>
<li><code>destination</code> <small><strong>string</strong></small> [<strong>B</strong>]: either a url or a breadcrumb-like destination</li>
<li><code>description</code> <small><strong>string</strong></small> [<strong>C</strong>]</li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;

    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        if($result-&gt;is(NaturalResultType::CLASSICAL)){
            $title = $result-&gt;title;
            $url   = $result-&gt;url;
        }
    }
</code></pre>

<h4 id="classical-large">Classical Large</h4>
<p>This type is an extension of the <a href="#classical">classical result</a>, with sitelinks in addition.</p>
<p><img alt="Largent Classical Results" src="../images/result-types/classical_large.jpg" /></p>
<p>Mobile version (since version 0.2): </p>
<p><img alt="Largent Classical Results on mobiles" src="../images/result-types/classical_large_mobile.jpg" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>NaturalResultType::CLASSICAL_LARGE</code></li>
<li><code>NaturalResultType::CLASSICAL</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>title</code> <small><strong>string</strong></small> [<strong>A</strong>]</li>
<li><code>url</code> <small><strong>string</strong></small>: the url targeted on clicking the title</li>
<li><code>destination</code> <small><strong>string</strong></small> [<strong>B</strong>]: either a url or a breadcrumb-like destination</li>
<li><code>description</code> <small><strong>string</strong></small> [<strong>C</strong>]</li>
<li><code>sitelinks</code> <small><strong>array</strong></small>:<ul>
<li><code>title</code> <small><strong>string</strong></small> [<strong>D</strong>]</li>
<li><code>url</code> <small><strong>string</strong></small>: the url targeted on clicking the sitelink title</li>
<li><code>description</code> <small><strong>string</strong></small> [<strong>E</strong>]</li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;

    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        if($result-&gt;is(NaturalResultType::CLASSICAL_LARGE)){
            $title = $result-&gt;title;
            $url   = $result-&gt;url;
            $sitelinks = $result-&gt;sitelinks;
            foreach ($sitelinks as $sitelink) {
                $sitelinkTitle = $sitelink-&gt;title;
            }
        }
    }
</code></pre>

<h4 id="classical-video">Classical Video</h4>
<p>This type an extension of the <a href="#classical">classical result</a>, but it refers to a video result.</p>
<p>The video result can be illustrated with either a thumbnail or a large image.</p>
<p><img alt="Video Results" src="../images/result-types/classical_video.png" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>NaturalResultType::CLASSICAL_VIDEO</code></li>
<li><code>NaturalResultType::CLASSICAL</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>title</code> <small><strong>string</strong></small> [<strong>A</strong>]</li>
<li><code>url</code> <small><strong>string</strong></small>: the url targeted on clicking the title</li>
<li><code>destination</code> <small><strong>string</strong></small> [<strong>B</strong>]: either a url or a breadcrumb-like destination</li>
<li><code>description</code> <small><strong>string</strong></small> [<strong>C</strong>]</li>
<li><code>videoLarge</code> <small><strong>bool</strong></small>: true if the video is image is large (usually first result)</li>
<li><code>videoCover</code> <small><strong>Media Object</strong></small>: The video cover. Only if videoLarge is true</li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;


    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        if($result-&gt;is(NaturalResultType::CLASSICAL_VIDEO)){
            $title = $result-&gt;title;
            if($result-&gt;videoLarge){
                // ...
            }
        }
    }
</code></pre>

<h4 id="classical-illustrated">Classical Illustrated</h4>
<p>Classical results might have an additional <code>CLASSICAL_ILLUSTRATED</code> type when the results is 
illustrated with a thumbnail. Non large video results have this type as well.</p>
<p><strong>Available with</strong></p>
<ul>
<li><code>NaturalResultType::CLASSICAL_ILLUSTRATED</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>thumb</code> <small><strong>Media Object</strong></small>: the thumbnail</li>
</ul>
<h4 id="image-group">Image Group</h4>
<p>Images that appear as a group of results.</p>
<p><img alt="Image Group Result" src="../images/result-types/image_group.jpg" /></p>
<p>Mobile version (since version 0.2):</p>
<p><img alt="Image Group Result" src="../images/result-types/image_group_carousel.jpg" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>NaturalResultType::IMAGE_GROUP</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>images</code> <small><strong>array</strong></small>: the list of images that compose the image group, each image contains:<ul>
<li><code>sourceUrl</code> <small><strong>string</strong></small>: the url where the image was found</li>
<li><code>targetUrl</code><small><strong>string</strong></small>: the url reached on clicking the image</li>
<li><code>image</code> <small><strong>string</strong></small>: the image data as specified by google (either an image url or a base64 encoded image)</li>
</ul>
</li>
<li><code>moreUrl</code> <small><strong>string</strong></small>: The url corresponding to the google image search</li>
<li><code>isCarousel</code> <small><strong>boolean</strong></small>: True if images have the form of a carousel (since version 0.2)</li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;


    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        if($result-&gt;is(NaturalResultType::IMAGE_GROUP)){
            foreach($result-&gt;images as $image){
                $sourceUrl = $image-&gt;sourceUrl;
            }
        }
    }
</code></pre>

<h4 id="video-group">Video Group</h4>
<p>This type is present on mobile results and was added with version <code>0.2</code>. </p>
<p>It shows some videos (usualy 10) arranged in a carousel.</p>
<p><img alt="Video Results" src="../images/result-types/video_group.jpg" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>NaturalResultType::VIDEO_GROUP</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>videos</code> <small><strong>array</strong></small>: the list of images that compose the image group, each image contains:<ul>
<li><code>title</code> <small><strong>string</strong></small>: Title of the video</li>
<li><code>url</code><small><strong>string</strong></small>: the url reached on clicking the item</li>
<li><code>image</code> <small><strong>Media object</strong></small>: image of the video</li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;


    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        if($result-&gt;is(NaturalResultType::VIDEO_GROUP)){
            foreach($result-&gt;videos as $video){
                $url = $video-&gt;url;
            }
        }
    }
</code></pre>

<h4 id="map">Map</h4>
<p>A result illustrated by a map and that contains sub-results.</p>
<p><img alt="Map Result" src="../images/result-types/map.jpg" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>NaturalResultType::MAP</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>localPack</code> <small><strong>array</strong></small>: The sub results for the map:<ul>
<li><code>title</code> <small><strong>string</strong></small> <strong>[A]</strong>: Name of the place</li>
<li><code>url</code><small><strong>string</strong></small> <strong>[B]</strong>: Website of the sub-result</li>
<li><code>street</code> <small><strong>string</strong></small> <strong>[C]</strong>: The address of the sub-result</li>
<li><code>stars</code> <small><strong>string</strong></small> <strong>[D]</strong>: The rating of the result as a number</li>
<li><code>review</code> <small><strong>string</strong></small> <strong>[E]</strong>: The review string as specified by google (e.g '1 review')</li>
<li><code>phone</code> <small><strong>string</strong></small> <strong>[G]</strong>: The phone number</li>
</ul>
</li>
<li><code>mapUrl</code> <small><strong>string</strong></small> <strong>[F]</strong>: The url to access the map search</li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;


    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        if($result-&gt;is(NaturalResultType::MAP)){
            foreach($result-&gt;localPack as $place){
                $website = $place-&gt;website;
            }
        }
    }
</code></pre>

<h4 id="answer-box">Answer Box</h4>
<p>Block that answers a question asked by the keywords.</p>
<p><img alt="Answer Box Results" src="../images/result-types/answer_box.png" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>NaturalResultType::ANSWER_BOX</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>title</code> <small><strong>string</strong></small> [<strong>A</strong>]</li>
<li><code>url</code> <small><strong>string</strong></small>: the url targeted on clicking the title</li>
<li><code>destination</code> <small><strong>string</strong></small> [<strong>B</strong>]: either a url or a breadcrumb-like destination</li>
<li><code>description</code> <small><strong>string</strong></small> [<strong>C</strong>]</li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;

    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        if($result-&gt;is(NaturalResultType::ANSWER_BOX)){
            $title = $result-&gt;title;
            $url   = $result-&gt;url;
        }
    }
</code></pre>

<h4 id="knowledge">Knowledge</h4>
<p><strong>Since version 0.2.1</strong></p>
<p>Knowledge boxes that appear among mobile results. </p>
<p>Be aware that knowledge results are only included if they are present among the result list. 
That means that on non-mobile results knowledge results are not available because they are placed on the right 
of natural results.</p>
<p><img alt="Knowledge Results" src="../images/result-types/knowledge.jpg" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>NaturalResultType::KNOWLEDGE</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>title</code> <small><strong>string</strong></small> [<strong>A</strong>]</li>
<li><code>shortDescription</code> <small><strong>string</strong></small> [<strong>B</strong>] nature of the element (character, </li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;

    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        if($result-&gt;is(NaturalResultType::KNOWLEDGE)){
            $title = $result-&gt;title;
            $description   = $result-&gt;shortDescription;
        }
    }
</code></pre>

<h4 id="tweet-carousel">Tweet Carousel</h4>
<p>Recent tweet list from an user matching the search keywords.</p>
<p><img alt="Tweets Carousel" src="../images/result-types/tweet_carousel.png" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>NaturalResultType::TWEETS_CAROUSEL</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>title</code> <small><strong>string</strong></small> <strong>[A]</strong></li>
<li><code>url</code> <small><strong>string</strong></small>: The url reach when clicking the title</li>
<li><code>user</code><small><strong>string</strong></small>: The author of the tweets</li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;


    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        if($result-&gt;is(NaturalResultType::TWEETS_CAROUSEL)){
            $user = $result-&gt;user;
        }
    }
</code></pre>

<h4 id="in-the-news">In the News</h4>
<p>Recent news results.</p>
<div class="admonition danger">
<p class="admonition-title">These results do not exists anymore</p>
<p>In early 2017 Google deleted in the news results, they were replaced by "top stories" results.
These results are now deprecated and might be deleted from serps in future releases.</p>
</div>
<p><img alt="In the News" src="../images/result-types/in_the_news.png" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>NaturalResultType::IN_THE_NEWS</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>news</code> <small><strong>array</strong></small><ul>
<li><code>title</code> <small><strong>string</strong></small> <strong>[A]</strong></li>
<li><code>description</code> <small><strong>string</strong></small> <strong>[B]</strong></li>
<li><code>url</code><small><strong>string</strong></small>: The url reached when clicking the title</li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;


    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        if($result-&gt;is(NaturalResultType::IN_THE_NEWS)){
            foreach($result-&gt;news as $news){
                $newsTitle = $title;
                $newsUrl = $url;
            }
        }
    }
</code></pre>

<h4 id="top-stories">Top Stories</h4>
<p>Carousel of recent popular news.</p>
<blockquote>
<p>Implemented in version <code>0.1.4</code> as a successor for "in the news"</p>
<p>Composed top stories for mobile were implemented with version <code>0.2.2</code> </p>
</blockquote>
<p>Top stories might be present in 2 distinctive formats: <code>carousel</code> or <code>vertical</code>. 
Note that vertical form is very rare.</p>
<p><strong>Carousel</strong></p>
<p><img alt="Topstories carousel" src="../images/result-types/top_stories_carousel.jpg" /></p>
<p><strong>Vertical</strong></p>
<p><img alt="Topstories vertical" src="../images/result-types/top_stories_vertical.jpg" /></p>
<p><strong>Composed</strong> (mobile)</p>
<p><img alt="Topstories composed" src="../images/result-types/top_stories_composed.png" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>NaturalResultType::TOP_STORIES</code></li>
<li><code>NaturalResultType::COMPOSED_TOP_STORIES</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>isCarousel</code> <small><strong>boolean</strong></small>: true when has a carousel</li>
<li><code>isVertical</code> <small><strong>boolean</strong></small>: true when has vertical items</li>
<li><code>news</code> <small><strong>array</strong></small><ul>
<li><code>title</code> <small><strong>string</strong></small> <strong>[A]</strong></li>
<li><code>url</code><small><strong>string</strong></small>: The url reached when clicking the title</li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;


    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        if($result-&gt;is(NaturalResultType::TOP_STORIES)){
            foreach($result-&gt;news as $news){
                $newsTitle = $title;
                $newsUrl = $url;
            }
        }
    }
</code></pre>

<p><strong>About composed top stories</strong></p>
<p>Composed top stories are mixing both of vertical and carousel news that appear on mobiles. 
The composed results will have variables <code>isCarousel</code> <strong>and</strong> <code>isVertical</code> set to true.</p>
<p>When iterating over news you can check if the news is a carousel or a vertical result:</p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;

    foreach($result-&gt;news as $news){
        if ($news-&gt;is(NaturalResultType::TOP_STORIES_NEWS_CAROUSEL) {
            // carousel
        } elseif ($news-&gt;is(NaturalResultType::TOP_STORIES_NEWS_VERTICAL) {
            // vertical
        }
    }
</code></pre>

<p>You can also distinctly get one of the result types:</p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;

    $carouselResults = $result-&gt;news-&gt;getResultsByType(NaturalResultType::TOP_STORIES_NEWS_CAROUSEL);
</code></pre>

<h4 id="flights">Flights</h4>
<p>Flight sample from google flights</p>
<p><img alt="Flights" src="../images/result-types/flights.png" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>NaturalResultType::FLIGHTS</code></li>
</ul>
<p><strong>Data</strong></p>
<p>No data is parsed from flight results. There is no plan to implement it because it's complex and not very useful.</p>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\NaturalResultType;

    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        if($result-&gt;is(NaturalResultType::FLIGHTS)){
            // Got a flight result
        }
    }
</code></pre>

<h2 id="adwords-results">Adwords Results</h2>
<p>The google client offers an Adwords parser.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Adwords parsing is still experimental!</p>
</div>
<pre><code class="php">    $adwordsResults = $response-&gt;getAdwordsResults();

    foreach($results as $result){
        // do stuff
    }
</code></pre>

<h3 id="adwords-sections">Adwords sections</h3>
<p>Adwords results are composed from 3 distinct sections. These sections can be at the top, at the right or at the bottom
of the natural results. See the schema:</p>
<p><img alt="Adwords positions" src="../images/adwords-positions.jpg" /></p>
<p>By default all results are available in the result set, if you need 
to get results from a section, you can use the section as a type filter:</p>
<pre><code class="php">    use Serps\SearchEngine\Google\AdwordsResultType;

    $adwordsResults = $response-&gt;getAdwordsResults();

    $topResults = $adwordsResults-&gt;getResultsByType(AdwordsResultType::SECTION_TOP);
    $rightResults = $adwordsResults-&gt;getResultsByType(AdwordsResultType::SECTION_RIGHT);
    $bottomResults = $adwordsResults-&gt;getResultsByType(AdwordsResultType::SECTION_BOTTOM);

    foreach($topResults as $result){
        // Do stuff...
    }
</code></pre>

<h3 id="adwords-types">Adwords Types</h3>
<h4 id="ad">Ad</h4>
<p>Ads results are the basics results from adwords.</p>
<p><img alt="Adwords ads" src="../images/result-types/adwords_ad.png" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>AdwordsResultType::AD</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>title</code> <small><strong>string</strong></small> <strong>[A]</strong></li>
<li><code>url</code> <small><strong>string</strong></small>: The url reach when clicking the title</li>
<li><code>visurl</code> <small><strong>string</strong></small> <strong>[B]</strong>: The visual url</li>
<li><code>description</code><small><strong>string</strong></small> <strong>[C]</strong></li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\AdwordsResultType;


    $results = $response-&gt;getAdwordsResults();

    foreach($results as $result){
        if($result-&gt;is(AdwordsResultType::AD)){
            $url = $result-&gt;url;
        }
    }
</code></pre>

<h4 id="shopping">Shopping</h4>
<p>These are the results from google shopping/merchant.</p>
<p><img alt="Google shopping" src="../images/result-types/adwords_shopping.png" /></p>
<p><strong>Available with</strong></p>
<ul>
<li><code>AdwordsResultType::SHOPPING_GROUP</code></li>
</ul>
<p><strong>Data</strong></p>
<ul>
<li><code>products</code> <small><strong>array</strong></small>: The product list. Each product contains the following items:<ul>
<li><code>title</code> <small><strong>string</strong></small> <strong>[A]</strong></li>
<li><code>image</code> <small><strong>string</strong></small> <strong>[B]</strong>: the image as specified by google - either an image url or a base64 encoded image</li>
<li><code>url</code> <small><strong>string</strong></small>: The url reached when clicking the title</li>
<li><code>target</code> <small><strong>string</strong></small> <strong>[C]</strong>: The target website as shown by google</li>
<li><code>price</code><small><strong>string</strong></small> <strong>[D]</strong>: The price as show by google</li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="php">    use Serps\SearchEngine\Google\AdwordsResultType;

    $results = $response-&gt;getAdwordsResults();

    foreach($results as $result){
        if($result-&gt;is(AdwordsResultType::SHOPPING_GROUP)){
            foreach($result-&gt;products as $item){
                $title = $item-&gt;title;
            }
        }
    }
</code></pre>

<h2 id="additional-info">Additional info</h2>
<p>A Google SERP contains even more information that the result list. Sometime they will be very helpful to get the
most from the SERP.</p>
<p>Here is the list of these info currently supported by the parser.</p>
<h3 id="number-of-results">Number of results</h3>
<p><img alt="number of results" src="../images/number_results.png" /></p>
<p>Represents the total number of results returned by the current search. 
The format of this number can change from country to country (61,000,000 or 61 000 000 or 6,10,00,000 etc...) 
We take care of returning this number as a integer no matter the initial format.</p>
<p>In some cases this number is not available (for instance with mobile layout)</p>
<pre><code class="php">    $numberOfResults = $response-&gt;getNumberOfResults();

    if(null === $numberOfResults){
        // D'oh!
    } elseif($numberOfResults &lt; 2000) {
        // ...
    } else {
        // ...
    }
</code></pre>

<h3 id="related-searches">Related searches</h3>
<p><img alt="related searches" src="../images/related-searches.png" /></p>
<p>Google uses to give a list of related searches at the bottom of the page. The method <code>getRelatedSearches</code> will return a list of these items.</p>
<pre><code class="php">    $relatedSearches = $response-&gt;getRelatedSearches();
    foreach ($relatedSearches as $relatedSearch) {
        $url = $relatedSearch-&gt;url;
        $title = $relatedSearch-&gt;title;
    }
</code></pre>

<h2 id="custom-parsing">Custom parsing</h2>
<p>Sometimes you need information that are not available in our parser. </p>
<p>First of all, search if someone already asked for this feature 
on the <a href="https://github.com/serp-spider/search-engine-google/issues">issue tracker</a>. </p>
<p>If you don't find a trace of this feature, but you still consider that this feature is important, then open an issue and
let's discuss it. This is very important because if the feature is implemented in the library it will take advantage of
being updated on google updates, and you wont have to maintain it.</p>
<hr />
<p>Back from the issue tracker, no one mentioned it and you still <strong>want to parse the information by yourself</strong>.
 Alright, here are the tools you need.</p>
<h3 id="query-with-css">Query with css</h3>
<p>The easiest way to do it for a web developer: <strong>with css</strong>.</p>
<pre><code class="php">    $response = $googleClient-&gt;query($googleUrl);

    // Returns \DOMNodeList
    $queryResult = $response-&gt;cssQuery('#someId');

    if ($queryResult-&gt;length == 1) {
        // You can query again to find items in the previous context.

        // Gets all items with the class 'someClass' within the element with the id 'someId'
        $queryResult = $response-&gt;cssQuery('.someClass', $queryResult-&gt;item(0));
    } else {
        // some errors...
    }
</code></pre>

<p>It works exactly as <a href="http://php.net/manual/fr/domxpath.query.php">DOMXPath::query</a> does. Actually the css is translated 
to xpath and <a href="http://php.net/manual/fr/domxpath.query.php">DOMXPath::query</a> is called on the dom element.</p>
<h3 id="query-with-xpath">Query with xpath</h3>
<p>That's very similar to the css way, except that you will use <strong>xpath</strong>.</p>
<pre><code class="php">    $response = $googleClient-&gt;query($googleUrl);

    $queryResult = $response-&gt;xpathQuery('descendant::div[@id=&quot;someId&quot;]');

    if ($queryResult-&gt;length == 1) {
        // Gets all 'a' tags inside the element with the id 'someId'.
        $queryResult = $response-&gt;xpathQuery('a', $queryResult-&gt;item(0));
    } else {
        // some errors...
    }
</code></pre>

<p>There is also a shortcut to the xpath object.</p>
<pre><code class="php">    $response = $googleClient-&gt;query($googleUrl);

    $xpath = $response-&gt;getXpath();
    $xpath-&gt;query('someXpath');
</code></pre>

<h3 id="manipulate-the-dom-object">Manipulate the DOM object</h3>
<p>You can get the <a href="http://php.net/manual/fr/class.domdocument.php">DOM object</a> to manipulate it, or to save it in a file.</p>
<pre><code class="php">    $response = $googleClient-&gt;query($googleUrl);

    $dom = $response-&gt;getDom();

    // Writes the dom content in the file 'file.html'
    $dom-&gt;save('file.html');
</code></pre>

<hr />
<p>view also:</p>
<ul>
<li><a href="../client-configuration/"><strong>Configure the google client</strong></a></li>
<li><a href="../google-url/"><strong>Create urls</strong></a></li>
<li><a href="../handle-errors/"><strong>Handle errors</strong></a></li>
</ul></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>


                This is an open-source project built for you with <i style="color:#c24b48;" class="fa fa-heart"></i>
                by <a href="https://github.com/gsouf">Soufiane Ghzal</a> and contributors. <br/> The project is being proudly sponsored by <a href="http://www.mondovo.com" target="_blank">Mondovo.com</a>, which uses this script for their <a href="http://www.mondovo.com/rankings-monitor.php" target="_blank">rank tracking service</a>.
                <br/>
                The documentation is generated with <a href="http://www.mkdocs.org/">MkDocs</a>
            </p>
        </footer>

        <script   src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.3/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../..';</script>
        <script data-main="../../../mkdocs/js/search.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js"></script>
        <script src="../../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    <script>
        ((window.gitter = {}).chat = {}).options = {
            room: 'serp-spider/help'
        };
        require.config({
            paths: {
                "sidecar": "https://sidecar.gitter.im/dist/sidecar.v1"
            }
        });
        require( ["sidecar"], function ($) {
                    console.log('sidecar loaded');
                }
        );
    </script>

    </body>
</html>
